<html prefix="og: http://ogp.me/ns#">
<head>
<title></title>
<meta id="abc" property="og:image" content="" />
</head>
</html>

<script type="text/javascript">
function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

function imageExists(image_url){
    var http = new XMLHttpRequest();
    http.open('HEAD', image_url, false);
    http.send();
    return http.status != 404;
}

var amipage = getParameterByName('page');
var amiproduct = getParameterByName('gcode', amipage);
var amiproductimagetemplete = 'https://img.amiami.com/images/product/main/';
var i = 0;
var amiproductimage = amiproductimagetemplete + i + '/' + amiproduct;
while (!imageExists(amiproductimage)) {
    i++;
    amiproductimage = amiproductimagetemplete + i + '/' + amiproduct;
}

document.getElementById('abc').innerHTML = amiproductimage;
//getParameterByName('gcode', foo)
</script>
